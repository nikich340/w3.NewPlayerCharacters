#
# quest structure root segment
# 
# (version: 29, saved: 2022-12-02 19:21:21)
#
---
structure:
  quest:
    blocks:
      start:
        ".editor": [ -359.0, 175.0 ]
        next:
          - changeworld.test_tp
          - changelayers.show_vanilla_start
      
      scene.Relaunch_female_scene:
        ".editor":
          pos: [ 924.0, 18.0 ]
          in: [ Input ]
          out: [ Output ]
        scene: 01.player_change_female.yml
        placement: ~PLAYER
        interruptable: true
        _fadein: true
        next.Output:
          - waituntil.Scene_type_change_request
      
      scene.Relaunch_male_scene:
        ".editor":
          pos: [ 893.0, -170.0 ]
          in: [ Input ]
          out: [ Output ]
        scene: 01.player_change_male.yml
        placement: ~PLAYER
        interruptable: true
        _fadein: true
        next.Output:
          - waituntil.Scene_type_change_request
      
      waituntil.3s:
        elapsed: "00:00:03"
        ".editor":
          pos: [ -168.0, 327.0 ]
          in: [ In ]
          out: [ Out ]
        next:
          - script.InitPlayerManager
      
      waituntil.Never_happen_fact:
        factdb: [ nr_never_happen, ">=", 1 ]
        ".editor":
          pos: [ 467.0, 300.0 ]
          in: [ In ]
          out: [ Out ]
        next:
          - end
      
      waituntil.Scene_type_change_request:
        factdb: [ nr_scene_player_change_requested, ">=", 1 ]
        ".editor":
          pos: [ 485.0, 53.0 ]
          in: [ In ]
          out: [ Out ]
        next:
          - script.wait_200_ms
      
      script.ChangePlayer_Q:
        ".editor":
          pos: [ 288.0, -227.0 ]
          in: [ In ]
          out: [ Out ]
        function: NR_ChangePlayer_Q
        next:
          - script.Remove_scene_type_change_fact
      
      script.InitPlayerManager:
        ".editor":
          pos: [ 4.0, 254.0 ]
          in: [ In ]
          out: [ Out ]
        function: NR_InitPlayerManager_Q
        next:
          - script.new_nr_notify_quest
      
      script.Remove_scene_type_change_fact:
        ".editor":
          pos: [ 445.0, -80.0 ]
          in: [ In ]
          out: [ Out ]
        function: RemoveFactQuest
        parameter:
          - factId: cname_nr_scene_player_change_requested
        next:
          - script.wait_1000_ms
      
      script.check_if_female:
        ".editor":
          pos: [ 672.5845947266, -92.0834655762 ]
          in: [ In ]
          out: [ "False", "True" ]
        function: NR_IsPlayerFemale_Q
        next.False:
          - scene.Relaunch_male_scene: Input
        next.True:
          - scene.Relaunch_female_scene: Input
      
      script.new_nr_notify_quest:
        ".editor":
          pos: [ 193.0, 363.0 ]
          in: [ In ]
          out: [ Out ]
        function: NR_Notify_Quest
        parameter:
          - message: "Hi! This is a dev version of \"New Player Characters\" mod."
          - seconds: 30.0
        next:
          - waituntil.Never_happen_fact
          - waituntil.Scene_type_change_request
      
      script.wait_1000_ms:
        ".editor":
          pos: [ 603.0, -198.0 ]
          in: [ In ]
          out: [ Out ]
        function: NR_Wait_Q
        parameter:
          - sec: 1.0
        next: ".done"
      
      script.wait_200_ms:
        ".editor":
          pos: [ 139.0, -63.0 ]
          in: [ In ]
          out: [ Out ]
        function: NR_Wait_Q
        parameter:
          - sec: 0.200000003
        next:
          - script.ChangePlayer_Q
      
      changelayers.show_vanilla_start:
        ".editor":
          pos: [ -120.0, 44.0 ]
          hint: show-only
          in: []
          out: []
        sync: true
        purge: false
        world: prologue
        show:
          - vanilla_encapment
        next: ".done"
      
      changeworld.test_tp:
        ".editor": [ -187.0, 176.0 ]
        destination: bob/test_point
        next:
          - waituntil.3s
      
      end:
        ".editor": [ 684.0, 333.0 ]
        next: ".done"
      
